<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Applications</title>
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename='Assets/PESO_logo.png') }}"
    />
    <!-- Styles -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/applicant.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/loader.css') }}"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="logo">
          <img
            src="{{ url_for('static', filename='Assets/PESO_logo.png') }}"
            alt="PESO SmartHire Logo"
          />
        </div>
        <nav class="nav">
          <a href="{{ url_for('applicants.applicant_home') }}" class="nav-link"
            >Home</a
          >
          <a
            href="{{ url_for('applicants.applications_page') }}"
            class="nav-link-active"
            >Applications</a
          >
          <a href="{{ url_for('applicants.notifications') }}" class="nav-link"
            >Notifications</a
          >
          <a
            href="{{ url_for('applicants.account_security') }}"
            class="nav-link"
            >Account & Security</a
          >
          <a href="{{url_for('logout')}}" id="logoutLink" class="nav-link"
            >Log Out</a
          >
        </nav>
      </div>
    </header>

    <section class="hero">
      <div class="hero-background">
        <img
          src="{{ url_for('static', filename='Assets/background.png') }}"
          alt="New City Hall of Lipa CIty"
        />
      </div>
      <div class="hero-content">
        <div class="container">
          <h1 class="hero-title">
            Welcome{% if session.applicant_name %}, {{ session.applicant_name
            }}{% endif %}!
          </h1>
          <p class="hero-description">Here’s what we have today</p>
        </div>
      </div>
    </section>

    <!-- Container Section -->
    <section class="container">
      <h2>My Applications</h2>
      <p>Manage and Track your Applications!</p>
    </section>

    <div class="tab-group">
      <button class="active" data-filter="all">All</button>
      <button data-filter="pending">Pending</button>
      <button data-filter="shortlisted">Shortlisted</button>
      <button data-filter="for-interview">For Interview</button>
      <button data-filter="hired">Hired</button>
      <button data-filter="rejected">Rejected</button>
      <button data-filter="cancelled">Cancelled</button>
      <button data-filter="close-job">Close Job</button>
    </div>

    <div class="applications-list" id="applicationsList"></div>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-left">
            <h3>PESO SmartHire</h3>
            <p>
              Connecting talent with opportunity through innovative recruitment
              solutions.
            </p>
            <a href="{{url_for('terms_and_conditions')}}" class="footer-note"
              >Terms and Conditions</a
            >
            <p class="copyright">© 2025 PESO SmartHire. All rights reserved.</p>
          </div>
          <div class="footer-right">
            <h3>Development Team</h3>
            <div class="team-member">
              <span>Anoya, Ruffa F.</span>
              <div class="social-links">
                <a href="https://github.com/anoyaruffa" target="_blank"
                  ><i class="devicon-github-plain"></i
                ></a>
                <a href="#"><i class="devicon-facebook-plain"></i></a>
                <a href="mailto: ruffaanoya2005@gmail.com" target="_blank"
                  ><i class="fa-solid fa-envelope"></i
                ></a>
              </div>
            </div>
            <div class="team-member">
              <span>Levita, Reymark A.</span>
              <div class="social-links">
                <a href="https://github.com/elliwinx" target="_blank"
                  ><i class="devicon-github-plain"></i
                ></a>
                <a
                  href="https://www.facebook.com/reymark.levita.3"
                  target="_blank"
                  ><i class="devicon-facebook-plain"></i
                ></a>
                <a href="mailto: levitareymark11@gmail.com" target="_blank"
                  ><i class="fa-solid fa-envelope"></i
                ></a>
              </div>
            </div>
            <div class="team-member">
              <span>Samonte, Ralph Matthew A.</span>
              <div class="social-links">
                <a href="https://github.com/RalphWreckeri2" target="_blank"
                  ><i class="devicon-github-plain"></i
                ></a>
                <a
                  href="https://www.facebook.com/ralphmatthew.13"
                  target="_blank"
                  ><i class="devicon-facebook-plain"></i
                ></a>
                <a href="mailto:ralphmatthew.samonte@gmail.com" target="_blank"
                  ><i class="fa-solid fa-envelope"></i
                ></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <div id="applicationDetailsModal" class="modal" style="display: none">
      <div class="modal-content">
        <div id="applicationDetailsContent">
          <!-- Content will be injected by JS -->
        </div>
        <div
          class="modal-actions"
          id="applicationModalActions"
          style="margin-top: 20px; text-align: right"
        >
          <!-- Cancel button will be injected here if applicable -->
        </div>
      </div>
    </div>

    <!-- Confirm Cancel Modal -->
    <div id="cancelConfirmModal" class="confirm-overlay">
      <div class="confirm-box">
        <h3>Cancel Application</h3>
        <p>
          Are you sure you want to cancel this application?<br />This action
          cannot be undone.
        </p>

        <div class="confirm-actions">
          <button id="confirmCancelYes" class="btn-yes">Yes, Cancel</button>
          <button id="confirmCancelNo" class="btn-no">No, Keep It</button>
        </div>
      </div>
    </div>

    <!-- Global loader partial -->
    {% include 'partials/loader.html' %}
    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/applicant.js') }}"></script>
    <script src="{{ url_for('static', filename='js/logout.js') }}"></script>
    <script>
      // Ensure the applications list is loaded when the page is ready
      document.addEventListener("DOMContentLoaded", function () {
        if (typeof renderApplications === "function") renderApplications();
      });
    </script>
  </body>
</html>
